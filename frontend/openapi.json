{"openapi": "3.1.0", "info": {"title": "NinjaExtraAPI", "version": "1.0.0", "description": ""}, "paths": {"/api/auth/login": {"post": {"operationId": "login", "summary": "Obtain Token", "parameters": [], "responses": {"200": {"description": "OK", "content": {"application/json": {"schema": {"$ref": "#/components/schemas/TokenResponseSchema"}}}}}, "tags": ["Auth"], "requestBody": {"content": {"application/json": {"schema": {"$ref": "#/components/schemas/MyTokenObtainPairSchema"}}}, "required": true}}}, "/api/auth/refresh": {"post": {"operationId": "refresh", "summary": "Refresh Token", "parameters": [], "responses": {"200": {"description": "OK", "content": {"application/json": {"schema": {"$ref": "#/components/schemas/TokenResponseSchema"}}}}, "401": {"description": "Unauthorized", "content": {"application/json": {"schema": {"$ref": "#/components/schemas/TokenResponseSchema"}}}}}, "description": "Refresh access token using refresh token from cookie", "tags": ["Auth"]}}, "/api/auth/logout": {"post": {"operationId": "logout", "summary": "Logout", "parameters": [], "responses": {"204": {"description": "No Content"}}, "description": "Logout user by clearing auth cookies", "tags": ["Auth"]}}, "/api/auth/register": {"post": {"operationId": "register", "summary": "Register", "parameters": [], "responses": {"200": {"description": "OK", "content": {"application/json": {"schema": {"$ref": "#/components/schemas/UserSchema"}}}}}, "tags": ["Auth"], "requestBody": {"content": {"application/json": {"schema": {"$ref": "#/components/schemas/UserCreateSchema"}}}, "required": true}}}, "/api/auth/me": {"get": {"operationId": "me", "summary": "Get User", "parameters": [], "responses": {"200": {"description": "OK", "content": {"application/json": {"schema": {"$ref": "#/components/schemas/UserSchema"}}}}}, "description": "Get the current authenticated user's information", "tags": ["Auth"], "security": [{"JWTAuth": []}]}}, "/api/auth/social": {"post": {"operationId": "social_auth", "summary": "Social Auth", "parameters": [], "responses": {"200": {"description": "OK", "content": {"application/json": {"schema": {"$ref": "#/components/schemas/TokenResponseSchema"}}}}}, "description": "Authenticate with social providers (Google, Facebook, etc.)", "tags": ["Auth"], "requestBody": {"content": {"application/json": {"schema": {"$ref": "#/components/schemas/SocialAuthSchema"}}}, "required": true}}}, "/api/payments/plans": {"get": {"operationId": "get_plans", "summary": "Get Plans", "parameters": [], "responses": {"200": {"description": "OK", "content": {"application/json": {"schema": {"items": {"$ref": "#/components/schemas/PlanSchema"}, "title": "Response", "type": "array"}}}}}, "description": "Get all available subscription plans", "tags": ["Payments"]}}, "/api/payments/subscription": {"get": {"operationId": "get_user_subscription", "summary": "Get User Subscription", "parameters": [], "responses": {"200": {"description": "OK", "content": {"application/json": {"schema": {"$ref": "#/components/schemas/UserSubscriptionSchema"}}}}}, "description": "Get user's current subscription status", "tags": ["Payments"], "security": [{"JWTAuth": []}]}}, "/api/payments/checkout": {"post": {"operationId": "create_checkout_session", "summary": "Create Checkout Session", "parameters": [], "responses": {"200": {"description": "OK", "content": {"application/json": {"schema": {"$ref": "#/components/schemas/CheckoutSessionResponseSchema"}}}}}, "description": "Create a Stripe checkout session for subscription", "tags": ["Payments"], "requestBody": {"content": {"application/json": {"schema": {"$ref": "#/components/schemas/CreateCheckoutSessionSchema"}}}, "required": true}, "security": [{"JWTAuth": []}]}}, "/api/payments/cancel": {"post": {"operationId": "cancel_subscription", "summary": "Cancel Subscription", "parameters": [], "responses": {"200": {"description": "OK", "content": {"application/json": {"schema": {"$ref": "#/components/schemas/CancelSubscriptionResponseSchema"}}}}}, "description": "Cancel user's subscription", "tags": ["Payments"], "requestBody": {"content": {"application/json": {"schema": {"$ref": "#/components/schemas/CancelSubscriptionSchema"}}}, "required": true}, "security": [{"JWTAuth": []}]}}, "/api/payments/portal": {"post": {"operationId": "create_customer_portal", "summary": "Create Customer Portal", "parameters": [], "responses": {"200": {"description": "OK", "content": {"application/json": {"schema": {"$ref": "#/components/schemas/CustomerPortalResponseSchema"}}}}}, "description": "Create a Stripe customer portal session", "tags": ["Payments"], "requestBody": {"content": {"application/json": {"schema": {"$ref": "#/components/schemas/CustomerPortalSchema"}}}, "required": true}, "security": [{"JWTAuth": []}]}}, "/api/payments/webhooks/stripe": {"post": {"operationId": "stripe_webhook", "summary": "Stripe Webhook", "parameters": [], "responses": {"200": {"description": "OK"}}, "description": "Handle Stripe webhook events", "tags": ["Webhooks"]}}, "/api/token/pair": {"post": {"operationId": "token_obtain_pair", "summary": "Obtain Token", "parameters": [], "responses": {"200": {"description": "OK", "content": {"application/json": {"schema": {"$ref": "#/components/schemas/TokenObtainPairOutputSchema"}}}}}, "tags": ["token"], "requestBody": {"content": {"application/json": {"schema": {"$ref": "#/components/schemas/TokenObtainPairInputSchema"}}}, "required": true}}}, "/api/token/refresh": {"post": {"operationId": "token_refresh", "summary": "Refresh Token", "parameters": [], "responses": {"200": {"description": "OK", "content": {"application/json": {"schema": {"$ref": "#/components/schemas/TokenRefreshOutputSchema"}}}}}, "tags": ["token"], "requestBody": {"content": {"application/json": {"schema": {"$ref": "#/components/schemas/TokenRefreshInputSchema"}}}, "required": true}}}, "/api/token/verify": {"post": {"operationId": "token_verify", "summary": "Verify Token", "parameters": [], "responses": {"200": {"description": "OK", "content": {"application/json": {"schema": {"$ref": "#/components/schemas/Schema"}}}}}, "tags": ["token"], "requestBody": {"content": {"application/json": {"schema": {"$ref": "#/components/schemas/TokenVerifyInputSchema"}}}, "required": true}}}}, "components": {"schemas": {"TokenResponseSchema": {"properties": {"detail": {"title": "Detail", "type": "string"}, "access": {"title": "Access", "type": "string"}}, "required": ["detail", "access"], "title": "TokenResponseSchema", "type": "object"}, "MyTokenObtainPairSchema": {"properties": {"password": {"maxLength": 128, "title": "Password", "type": "string"}, "email": {"maxLength": 255, "title": "Email", "type": "string"}}, "required": ["password", "email"], "title": "MyTokenObtainPairSchema", "type": "object"}, "UserSchema": {"properties": {"first_name": {"title": "First Name", "type": "string"}, "last_name": {"title": "Last Name", "type": "string"}, "email": {"title": "Email", "type": "string"}}, "required": ["first_name", "last_name", "email"], "title": "UserSchema", "type": "object"}, "UserCreateSchema": {"properties": {"email": {"title": "Email", "type": "string"}, "password": {"title": "Password", "type": "string"}, "re_password": {"title": "Re Password", "type": "string"}, "first_name": {"anyOf": [{"type": "string"}, {"type": "null"}], "title": "First Name"}, "last_name": {"anyOf": [{"type": "string"}, {"type": "null"}], "title": "Last Name"}}, "required": ["email", "password", "re_password", "first_name", "last_name"], "title": "UserCreateSchema", "type": "object"}, "SocialAuthSchema": {"description": "Schema for social authentication", "properties": {"credential": {"title": "Credential", "type": "string"}, "provider": {"default": "google", "title": "Provider", "type": "string"}}, "required": ["credential"], "title": "SocialAuthSchema", "type": "object"}, "PlanSchema": {"properties": {"id": {"title": "Id", "type": "integer"}, "name": {"title": "Name", "type": "string"}, "price": {"anyOf": [{"type": "number"}, {"type": "string"}], "title": "Price"}, "currency": {"title": "Currency", "type": "string"}, "description": {"title": "Description", "type": "string"}, "features": {"items": {"type": "string"}, "title": "Features", "type": "array"}, "is_active": {"title": "Is Active", "type": "boolean"}}, "required": ["id", "name", "price", "currency", "description", "features", "is_active"], "title": "PlanSchema", "type": "object"}, "SubscriptionSchema": {"properties": {"id": {"title": "Id", "type": "integer"}, "plan": {"$ref": "#/components/schemas/PlanSchema"}, "status": {"title": "Status", "type": "string"}, "current_period_start": {"format": "date-time", "title": "Current Period Start", "type": "string"}, "current_period_end": {"format": "date-time", "title": "Current Period End", "type": "string"}, "cancel_at_period_end": {"title": "Cancel At Period End", "type": "boolean"}}, "required": ["id", "plan", "status", "current_period_start", "current_period_end", "cancel_at_period_end"], "title": "SubscriptionSchema", "type": "object"}, "UserSubscriptionSchema": {"properties": {"has_active_subscription": {"title": "Has Active Subscription", "type": "boolean"}, "subscription": {"anyOf": [{"$ref": "#/components/schemas/SubscriptionSchema"}, {"type": "null"}]}, "plan_name": {"anyOf": [{"type": "string"}, {"type": "null"}], "title": "Plan Name"}}, "required": ["has_active_subscription"], "title": "UserSubscriptionSchema", "type": "object"}, "CheckoutSessionResponseSchema": {"properties": {"session_id": {"title": "Session Id", "type": "string"}, "session_url": {"title": "Session Url", "type": "string"}}, "required": ["session_id", "session_url"], "title": "CheckoutSessionResponseSchema", "type": "object"}, "CreateCheckoutSessionSchema": {"properties": {"plan_id": {"title": "Plan Id", "type": "integer"}, "success_url": {"title": "Success Url", "type": "string"}, "cancel_url": {"title": "Cancel Url", "type": "string"}}, "required": ["plan_id", "success_url", "cancel_url"], "title": "CreateCheckoutSessionSchema", "type": "object"}, "CancelSubscriptionResponseSchema": {"properties": {"success": {"title": "Success", "type": "boolean"}, "message": {"title": "Message", "type": "string"}}, "required": ["success", "message"], "title": "CancelSubscriptionResponseSchema", "type": "object"}, "CancelSubscriptionSchema": {"properties": {"subscription_id": {"title": "Subscription Id", "type": "string"}}, "required": ["subscription_id"], "title": "CancelSubscriptionSchema", "type": "object"}, "CustomerPortalResponseSchema": {"properties": {"session_url": {"title": "Session Url", "type": "string"}}, "required": ["session_url"], "title": "CustomerPortalResponseSchema", "type": "object"}, "CustomerPortalSchema": {"properties": {"return_url": {"title": "Return Url", "type": "string"}}, "required": ["return_url"], "title": "CustomerPortalSchema", "type": "object"}, "TokenObtainPairOutputSchema": {"properties": {"email": {"maxLength": 255, "title": "Email", "type": "string"}, "refresh": {"title": "Refresh", "type": "string"}, "access": {"title": "Access", "type": "string"}}, "required": ["email", "refresh", "access"], "title": "TokenObtainPairOutputSchema", "type": "object"}, "TokenObtainPairInputSchema": {"properties": {"password": {"maxLength": 128, "title": "Password", "type": "string"}, "email": {"maxLength": 255, "title": "Email", "type": "string"}}, "required": ["password", "email"], "title": "TokenObtainPairInputSchema", "type": "object"}, "TokenRefreshOutputSchema": {"properties": {"refresh": {"title": "Refresh", "type": "string"}, "access": {"anyOf": [{"type": "string"}, {"type": "null"}], "title": "Access"}}, "required": ["refresh", "access"], "title": "TokenRefreshOutputSchema", "type": "object"}, "TokenRefreshInputSchema": {"properties": {"refresh": {"title": "Refresh", "type": "string"}}, "required": ["refresh"], "title": "TokenRefreshInputSchema", "type": "object"}, "Schema": {"properties": {}, "title": "Schema", "type": "object"}, "TokenVerifyInputSchema": {"properties": {"token": {"title": "Token", "type": "string"}}, "required": ["token"], "title": "TokenVerifyInputSchema", "type": "object"}}, "securitySchemes": {"JWTAuth": {"type": "http", "scheme": "bearer"}}}, "servers": []}
